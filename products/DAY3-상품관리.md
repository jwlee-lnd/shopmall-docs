<div style="text-align: right"> 2022.07.18 10:30, 상품 교육, 담당자 이지원 </div>

# DAY 3

## <상품등록>

### 6) 기본정보 탭 - 단품설정
1. 옵션속성은 코드로 관리 (색상/사이즈/스타일/없음)
2. 속성1, 2, 3 순차적으로 선택한 값을 필터링하여 보여줌
    - 예) 속성1 에서 '색상' 선택 시 속성2는 '사이즈', '스타일', '없음' 중에서 선택 가능
1. 상품구분코드, 상품형태코드가 사은품일 경우 옵션속성1, 2, 3 모두 '없음'으로 자동 세팅
    - 사은품도 단품 1개는 무조건 필요 (이벤트 경품 등록할 때 단품조회 팝업 사용함)
2. 상품구분코드가 세트나 초이스일 경우 옵션속성1, 2, 3 모두 '없음'으로 자동 세팅
    - 현재 일반과 사은품만 사용하므로 개발되어 있지 않음
3. 단품이 이미 생성되어 있는 경우 변경 불가능
    - 단품이 모두 삭제되어있는 경우에만 가능한데 단품 삭제는 승인요청 이전 단계에서만 가능
    - 승인과정 중에는 단품이 무조건 1개 이상 존재해야 승인이 가능하므로 승인완료 이후에는 결국 변경 불가능
4. 속성1 '없음'일 시 속성2, 3 '없음'
5. 속성2 '없음'일 시 속성3 '없음'

### 7) 기본정보 탭 - 단품목록
~~판매재고구분 무제한일 때 재고수량 null이어야 하는지 확인 필요~~
1. 상품기본정보 폼에서 상품명, 단품설정 폼에서 옵션속성1, 2, 3에 모두 값이 제대로 들어가야 추가 버튼 클릭 가능
1. 추가 버튼 클릭 후 단품조합팝업에서 추가된 단품을 목록에 보여줌 (아직 db에는 저장되지 않은 상태)
2. 단품목록에서 대표단품여부가 Y인 데이터가 무조건 1개 있어야 함
3. 단품판매상태코드
    - 승인요청 단계 이전에서는 단품의 판매상태를 바꿀 수 없음. 판매대기 상태에서 disabled임
    - 승인완료 이후 판매중부터 판매중지까지 변경 가능
    - 승인완료 이후 상품판매상태와 같은 방식으로 동작~~할 수 있으나 승인완료 이후에는 단품 추가 및 삭제가 불가능해서 판매중지 시 판매상태 dropdownlist disabled 로직은 주석처리 해놨음~~
4. 승인완료 이후 단품 추가/삭제 불가능
5. 체크한 값이 있어야 삭제 버튼 클릭 가능
6. 재고수량은 상품일괄수정에서도 변경 가능
7. 단품 생성할 때는 상품명, 속성값이 들어가기 때문에 단품이 생성된 뒤에는 단품 생성에 관여하는 항목들이 변경되면 안됨
    1. 단품 1개 이상 생성 시(그리드에 추가될 시) 상품기본정보의 상품명, 상품구분코드, 상품형태코드 disabled
        1. 상품구분코드가 사은품일 때는 옵션속성1, 2, 3 모두 '없음'으로 자동 세팅되므로 disabled 시킴
        2. 단품을 모두 삭제해야 상품구분코드, 상품형태코드 변경 가능
            - 극단적일 수도 있지만 사은품의 경우 단품가격을 갖고 있지 않고 있기 때문에 단품에서 사용여부 N처리 하는 게 제일 깔끔
            - 그리고 상품 및 단품의 특성을 변경하는 것이므로 사용여부 N처리 하는 게 제일 적합하다고 생각됨
    2. 단품 1개 이상 생성 시(그리드에 추가될 시) 단품설정의 옵션속성 모두 disabled
8. 단품설정의 옵션속성1, 2, 3 이 모두 없음일 경우 단품은 1개만 생성 가능 (1개 생성 후 추가 버튼 비활성화)

### 8) 기본정보 탭 - 가격설정
1. 과세구분
    - 과세코드, TAXT_CD 로 관리
    1. 과세
    2. 면세
    3. *영세
2. 부가세
    - 부가세율코드, VAT_RT_CD로 관리
3. 특소세
    - 특소세율코드, STAX_RT_CD로 관리
4. 부가가치세   
    - 부가가치세란 상품(재화)의 거래나 서비스(용역)의 제공과정에서 얻어지는 부가가치(이윤)에 대하여 과세하는 세금
        > 부가가치세 = 매출세액 - 매입세액
    1. 부가가치세는 물건값에 포함되어 있기 때문에 실제로는 최종소비자가 부담하고, 사업자는 상품을 판매하거나 서비스를 제공할 때 최종소비자가 부담한 부가가치세를 거래금액에 일정금액의 부가가치세를 징수하여 세무서에 납부
    2. 사업상 상품(재화)의 판매나 서비스(용역)를 제공하는 모든 사업자는 부가가치세를 신고, 납부할 의무가 있으나 예외가 존재
        - 면세
        > 미가공식료품 등 생필품 판매, 의료 · 교육 관련 용역 제공 등 법령에 열거된 규정에 따라 부가가치세가 면제되는 사업만을 영위하는 경우에는 부가가치세 신고·납부 의무가 없습니다.     
        >
        > 출처: [국세청 부가가치세][vatreferencefromhometax]

    3. 부가가치세를 징수하는 의무가 있지만 0%의 부가가치세를 적용할 수도 있음
        - 영세
        >  제21조(재화의 수출)   
        >
        > ① 재화의 공급이 수출에 해당하면 그 재화의 공급에 대하여는 30조에도 불구하고 영(零) 퍼센트의 세율(이하 “영세율”이라 한다)을 적용한다.    
        >
        > 출처: [부가가치세법 제21조][vatrule21st]
    4. 과세와 영세는 세금계산서를 발행하지만 면세는 계산서를 발행함
5. 특소세
    - 특별소비세 또는 개별소비세
    - 특별소비세는 부가가치세의 단일 세율에 따른 세 부담을 보완하고 사치성 물품 또는 업종에 대한 소비를 억제시키기 위해 마련됨
        > 2. 다음 각 목의 물품에 대해서는 그 물품가격 중 대통령령으로 정하는 기준가격(이하 “기준가격”이라 한다)을 초과하는 부분의 가격(이하 이 호에서 “과세가격”이라 한다)에 해당 세율을 적용한다.
        >
        >       가. 다음의 물품에 대해서는 과세가격의 100분의 20
        >
        >           1) 보석[공업용 다이아몬드, 가공하지 아니한 원석(原石) 및 나석(裸石)은 제외한다], 진주, 별갑(鼈甲), 산호, 호박(琥珀) 및 상아와 이를 사용한 제품(나석을 사용한 제품은 포함한다)
        >           2) 귀금속 제품
        >           4) 고급 시계
        >           5) 고급 융단
        >           6) 고급 가방
        >
        >       나. 다음의 물품에 대해서는 과세가격의 100분의 20
        >
        >           1) 고급 모피와 그 제품[토끼 모피 및 그 제품과 생모피(生毛皮)는 제외한다]
        >           2) 고급 가구
        >
        > 출처: [개별소비세법][staxrule]
    - 다른 사이트 예시 (주로 직구의 경우 확인 가능)
        - [니코니코][niconicomall]
        - [2fasts][2fastsmall]
4. 적용버튼
    - 상품에서 가격설정이 변경되면 단품가격도 변경되어야 함
    - 승인요청 단계 이후로는 폼이 disabled 처리가 되므로 적용버튼은 상품승인상태가 '등록', '승인반려'일 때만 클릭 가능
    - 상품승인상태가 '등록', '승인반려'일 때 단품가격변경 데이터는 등록 혹은 삭제 처리만 가능하므로 '등록' 상태인 데이터밖에 없음 (승인요청을 할 수 없기 때문에 '승인반려'인 데이터도 없음)
    - 적용버튼을 클릭하면 변경된 상품의 가격설정 정보가 상품 테이블에도 반영되고 이 상품에서 '등록' 상태인 모든 단품가격변경 데이터에도 반영됨
    - 부가가치세: 과세표준가격 * 부가세율
    - 특별소비세: 과세표준가격 * 특소세율

### 9) 기본정보 탭 - 상품주문정보
1. 구매횟수제한여부
    - 마스크 대란 이후 생김
2. 일간최대구매횟수
    - 구매횟수제한여부 Y일 시 0 이상
3. 최소주문수량 <= 최대주문수량

### 10) 기본정보 탭 - 상품물류정보
1. 상품 물류에 대한 정보
2. 상품출고중지여부 Y일시 상품출고중지사유 필수
3. 환불구분: 선환불/후환불
    - 먼저 환불을 하고 회수할 건지 / 회수한 뒤 환불할 건지
    - 주문과 함께 논의해야 할 사항이라 추후에 고정값으로 설정한 뒤 화면에서 숨길 수 있음
4. 정산주기
    1. 30/25
        - 한달치를 다음달 25일에 정산
    2. 10/10
        - 10일치를 10일 뒤에 정산
    3. 배치에는 크게 영향이 없고 정산 조회 때 주기 별로 조회할 수 있도록 역할을 함
    4. 현재 30/25만 사용 중
    5. 주로 협력사 단위로 설정하고 상품 단위의 정산주기를 사용하는 경우는 드묾

### 11) 기본정보 탭 - 배송템플릿정보
1. 협력사의 배송템플릿정보를 보여줌
2. 협력사 입력 후 조회 성공 시(onBlur, onKeyUp, 팝업 onComplete) 배송템플릿도 조회하여 세팅
2. 상품기본정보 폼에서 상품형태코드와 배송템플릿정보의 상품보관유형코드를 선택해야 필터링된 배송템플릿 목록을 선택할 수 있음

### 12) 기본정보 탭 - 뱃지목록
1. MALL 상품목록 혹은 상품상세에서 보일 뱃지와 아이콘 지정
2. 적용종료일시 > 적용시작일시

### 13) 단품가격 탭 - 신규버튼
1. 단품이 존재하고 상품의 상품구분, 상품형태가 일반일 때 신규 버튼 활성화
    - 사은품은 이벤트 경품 추천용으로 단품가격이 없음
2. 가격시작일시는 최소 다음날 자정으로 해놨으나 가격승인 때 현재일시보다 가격일시가 작은 데이터들은 승인하지 못하도록 막아놨음
3.  신규일 때가 가격종료일시는 받지 않음
    - ~~Q.승인완료일 때는 가격일시를 입력 받는다면 일시가 겹칠 때는 어떻게 함~~
4. 단위판매가와 단위매입가는 입력과 동시에 상품의 과세구분, 부가세율코드, 특소세율에 따라 순단위판매가, 부가세단위판매가, 특소세단위판매가를 계산하여 폼 세팅
    * 현재 매입가격(PRS_PRC)라는 컬럼을 기준으로 개발하였으나 단위원가(UNT_UCOST) 컬럼을 사용하는 것으로 변경되므로 추후 순단위원가, 부가세단위원가, 특소세단위원가도 계산하여 세팅하는 것으로 변경. 화면에도 항목이 추가될 수 있음
    - 단위판매가 = 순단위판매가 + 부가세단위판매가 + 특소세단위판매가
    - 단위매입가(단위원가) = 순단위원가 + 부가세단위원가 + 특소세단위원가
5. 단위판매가와 단위매입가가 입력되는 동시에 마진율도 계산함. 단 화면에는 보이지 않음
    * 현재 매입가격(PRS_PRC)라는 컬럼을 기준으로 개발하였으나 단위원가(UNT_UCOST) 컬럼을 사용하는 것으로 변경되므로 단위판매가와 단위원가를 비교하여 마진율을 계산 하여야 함
    - 마진: 판매가 - 매입가 (컬럼 기준으로 다시 말하면 단위판매가 - 단위원가)
    - 마진율: (판매가 - 매입가) / 판매가 * 100
6. 단위매입가로 들어오는 항목은 이제 PRS_PRC가 아닌 UNT_UCOST가 되어야 함

### 14) 단품가격 탭 - 저장버튼
1. 등록, 승인반려만 수정 가능
2. 단위판매가, 단위매입가 변경시 세금 계산, 마진율 계산이 동시에 일어남
3. 가격시작일시는 최소 다음날 자정으로 해놨으나 가격승인에서 현재일시보다 가격일시가 작은 데이터들은 승인하지 못하도록 막아놨음

### 15) 단품가격 탭 - 일괄적용 버튼
1. 신규 데이터만 일괄적용 클릭 가능
2. 가격승인은 MD와 MD팀장 두 단계로 나뉘기 때문에 상품등록에서는 일괄 등록만 가능


### 16) 단품가격 탭 - 승인요청 버튼
1. MD팀장에게 승인요청함
2. 가격승인 화면에서 승인 혹은 반려가 이뤄짐
3. 등록/승인반려인 데이터만 승인요청 가능

### 17) 단품가격 탭 - 삭제 버튼
1. 등록, 승인반려, 승인완료 삭제 가능
    - 승인완료의 삭제의 경우 미래 가격만 가능하며 삭제 처리 되면 이전 가격의 가격종료일시를 삭제 처리된 가격종료일시까지 미룸
2. 가격시작일시가 현재일시를 지난 가격은 삭제 불가능

### 18) 정보고시 탭
1. 상품분류정보고시품목항목 테이블에 있는 정보고시는 필수여부 Y
    - db에서 데이터를 불러올 때 상품분류정보고시에 있는 데이터와 비교하여 필수여부를 변경해서 가져옴
    - original data는 db data, 변경 데이터는 상품분류정보고시 데이터와 비교하여 가공된(필수여부가 반영된) data
2. 필수여부 Y로 표시된 데이터는 삭제가 불가능하며 내용을 입력해야 함
    * Link: [쿠팡 스탠리][coupangstanleylink]
3. 상품분류정보고시에서 등록되지 않으면 상품등록에서 등록할 수 없는데 승인요청 때 검증에서는 db기준이기 때문에 상품분류정보고시에 데이터가 없을 경우를 제한하지 않고 있음
    - 기준정보인 상품분류정보고시 데이터를 생성하지 않은 MD의 책임을 물음
    - 단 상품등록 화면에서 승인완료된 상품의 정보고시를 수정해야 하는 경우 정보고시 데이터가 무조건 존재해야 수정 저장이 가능하도록 알림 띄우고 있음

### 19) 안전인증 탭
1. 전안법 관련
    - 전기 전자제품이나 유아용품 등 국민의 안전에 해를 끼칠 수 있는 제품에 대한 인증
        >   제1조(목적) 이 법은 전기용품 및 생활용품의 안전관리에 관한 사항을 규정함으로써 국민의 생명ㆍ신체 및 재산을 보호하고, 소비자의 이익과 안전을 도모함을 목적으로 한다.
        >
        > 제10조(안전인증표시등이 없는 안전인증대상제품의 판매ㆍ사용 등의 금지)
        >
            >   ① 안전인증대상제품의 제조업자ㆍ수입업자ㆍ판매업자 및 대여업자는 안전인증표시등이 없는 안전인증대상제품을 판매ㆍ대여하거나 판매ㆍ대여할 목적으로 수입ㆍ진열 또는 보관해서는 아니 된다.
        >
            >   ② 안전인증대상제품의 판매중개업자ㆍ구매대행업자 및 수입대행업자는 안전인증표시등이 없는 안전인증대상제품의 판매를 중개(「전자상거래 등에서의 소비자보호에 관한 법률」에 따른 통신판매중개자가 자신이 운영하는 사이버몰에서 발견된 안전인증표시등의 표시가 없는 제품을 즉시 삭제하고 <U>통신판매중개의뢰자가 상품등록 시 안전인증표시등의 정보를 입력하도록 하는 한편</U>, 소비자가 이러한 정보를 확인할 수 있도록 기술적 조치를 취한 경우는 제외한다)하거나 구매 또는 수입을 대행해서는 아니 된다.
        >
            >   ③ 제9조제3항제4호부터 제6호까지의 어느 하나에 해당하는 자는 안전인증표시등이 없는 안전인증대상제품을 사용해서는 아니 된다.
    - [전기용품 및 생활용품 안전관리법][electronicdevicesafetyrule]
2. 안전인증유형코드는 상세코드와 분리하여 SFT_CERT_PATTN_CD, SFT_CERT_PATTN_DTL_CD 로 나뉘어 관리하였으나 하나로 합칠 수도 있음
    - 추후 논의 예정
    - 상품팀 및 공통팀에서 논의 후 결정 (공통코드 설계와 연관되므로 바로 결정할 수가 없었음)
    - 공통 유틸 사용 방식 변경으로 인해 안전인증유형상세코드 입력 부분의 개발 수정이 필요함

### 20) 상품설명 탭
1. 상품설명도 다국어 관리하면서 추가됨
2. 클릭하여 단건 입력 후 저장

### 21) 상품등록 -승인요청 버튼
1. 프론트엔드 검증정보
    - 기본적으로 저장할 때 확인하는 정보(필수 정보 및 조건성 정보) 탭마다 모두 확인
2. 백엔드
    1. 상품승인상태(등록), 상품판매상태(판매대기)
    2. 기준 정보인 브랜드, 제조사, 원산지, MD, MD사용자가 모두 유효한 데이터(사용여부 Y)인지 확인
    3. 협력사, 협력사배송템플릿가 모두 유효한 데이터(사용여부 Y이며 같은 협력사ID로 존재)인지 확인
        * (상품형태, 상품보관유형까지 검증 추가 필요)
    4. 상품분류(대/중/소/세 4단계)
    5. 상품이미지(대표이미지 1개 존재 목록 이미지 1개 이상 존재)
    6. 단품, 단품가격변경
        - 단품 존재 확인
        - 단품마다 등록 상태의 가격이 존재하는지 확인 (사은품일 경우 제외)
    7. 상품정보고시품목항목
        - 상품분류정보고시에 등록된 정보고시가 모두 필수여부 Y로 저장되어 있는지 확인
        - 필수여부 Y인 데이터의 내용이 모두 입력되어 있는지 확인

* * *
PREV: [DAY2][day2]
* * *

<!-- 첨부링크 -->
[vatreferencefromhometax]: https://www.nts.go.kr/nts/cm/cntnts/cntntsView.do?mi=2272&cntntsId=7693
[vatrule21st]: https://www.law.go.kr/법령/부가가치세법/(20220701,18577,20211208)/제21조
[staxrule]: https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EA%B0%9C%EB%B3%84%EC%86%8C%EB%B9%84%EC%84%B8%EB%B2%95/(20190401,16091,20181231)/%EC%A0%9C1%EC%A1%B0
[niconicomall]: http://www.niconicomall.com/bbs/content.php?co_id=customs
[2fastsmall]: https://www.2fasts.com/page/info_tax.asp

[coupangstanleylink]: https://www.coupang.com/vp/products/1596362803?itemId=3106757208&vendorItemId=71094519712&trcid=370161&traid=home_CategoryBest_C3&sourceType=CATEGORY&categoryId=185704&isAddedCart=

[electronicdevicesafetyrule]: https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EC%9A%A9%ED%92%88%EB%B0%8F%EC%83%9D%ED%99%9C%EC%9A%A9%ED%92%88%EC%95%88%EC%A0%84%EA%B4%80%EB%A6%AC%EB%B2%95

[day2]: ../products/DAY2-%EC%83%81%ED%92%88%EA%B4%80%EB%A6%AC.md