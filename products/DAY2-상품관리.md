<div style="text-align: right"> 2022.07.15 14:30, 상품 교육, 담당자 이지원 </div>

# DAY 2

## <상품조회>
1. 협력사는 onBlur 든 onKeyUp이든 팝업호출이든 협력사상태코드가 거래중인 협력사만 검색되게 해야 함
2. 상품승인상태는 기본적으로 등록-승인요청-승인반려-승인완료 로 구성됨
    - 직급에 따라 중간 단계 추가 가능, 예) MD승인요청, MD팀장승인요청
3. 상품구분은 코드로 관리하며 일반/세트/초이스/사은품/특수상품 으로 구성됨
    - 개발 상 일반/사은품만 사용 예정
    - 각 코드값에 대한 설명은 상품등록에서 상품형태코드와 설명 예정
4. 과세구분은 과세코드(TAXT_CD) 로 과세, 면세로 있음
    - 예전에 영세도 있었음
    - 코드값 설명은 상품등록에서 부가세와 특소세와 함께 설명 예정
5. 상품판매상태는 코드로 관리하며 판매대기/판매중/일시품절/판매중지 로 구성됨
    - 각 코드값에 대한 설명은 상품등록에서 설명 예정
6. 상품분류는 상품분류등록에서 말했듯 4단계로 진행됨
    - 상품조회는 입력하는 곳이 없으므로 1단계부터 4단계까지 모두 검색 가능
7. 상품목록 그리드의 대표단품단위판매가는 말 그대로 대표단품여부가 Y인 단품의 단위판매가


## <상품프로세스>
- 별첨: [상품승인 프로세스](#별첨1-상품승인순서도)
## <상품등록>

### 1) 기본정보 탭 - 상품기본정보
1. 상품명은 고객사 요청에 따라 특수문자, 띄어쓰기 제한 걸 수도 있고 지금은 바이트 제한만 걸어 놓음
2. 상품구분코드
    - 설계 상 일반, 사은품만 사용
    1. 일반: 공산품, 일반상품
    2. 세트: 일반상품 + 일반상품 (지정묶음)
    3. 초이스: 일반상품 + 일반상품 (금액 내 상품목록에서 상품 골라담기)
    4. 사은품: 증정 상품
    5. 특수상품: 무형상품, 주문제작상품
3. 상품형태코드 -  상품구분코드와 연관
    - 설계 상 일반, 사은품만 사용
    1. 일반: 일반/세트/초이스 일 때 선택 가능
    2. 주문제작: 특수상품일 때 선택 가능
    3. 사은품: 사은품일 때 선택 가능
    4. 보험: 특수상품일 때 선택가능
    5. 여행: 특수상품일 때 선택가능
4. 상품등록에서도 협력사는 거래중이고 공급사인 협력사만 입력 가능 (협력사상태코드: 거래중, 협력사구분코드: 공급사)
5. MD와  MD사용자 정보는 서로 상응해야 함
    - 입력한 MD사용자가 포함되지 않은 MD를 입력하면 안됨
    - 현재는 저장할 때 서버에서 검증 중이고 프론트에서도 MD사용자 입력시 MD 자동 입력하도록 되어있음
6. 상품기본정보폼에서 상품구분, 상품형태, 상품승인상태, 브랜드, 협력사, 제조사, MD, MD사용자, 원산지, 상품판매시작일시, 상품판매종료일시는 승인요청 이후 단계부터는 disabled
    - MD, MD사용자는 상품일괄수정에서 변경 가능
7. 상품판매상태
    1. 최초승인 이전에는 판매대기 상태이고 dropdown은 disabled
    2. 최초승인 시 판매중으로 update 됨
    3. 최초승인 이후부터 dropdown enabled
    4. 상품판매상태 상태 변경 설명 (이 과정은 승인완료 상품일 때를 전제로 함)
        1. 판매중일 때는 일시품절 혹은 판매중지로 변경 가능
        2. 일시품절일 때는 판매중 혹은 판매중지로 변경 가능
        3. 판매중지일 때는 모든 폼 disabled로 변경 불가
            - 상품일괄수정에서 판매상태 일괄 변경 가능
        - 지난 프로젝트에서는 '일시중단' 버튼으로 바로 판매중지시킬 수 있는 기능이 있었으나 현재는 기능 개발만 되어있고 화면에서는 숨김(주석 처리)
8. 상품판매시작일시, 상품판매종료일 시는 승인요청 단계 이전일 경우 수정 가능, 그 이후는 disabled
9. 검색단어는 현재 자유롭게 받게 되어있음
    - 고객사 요구 시 ,(콤마) 구분, #(해시태그) 구분 등 제어기능 추가 필요

### 2) 기본정보 탭 - 상품분류정보
1. 상품분류는 4단계까지 필수입력
2. 적용버튼은 상품정보고시 update를 위함
    - 상품분류가 변경됨에 따라 상품분류정보고시를 기준으로 하여 불러오는 필수입력 정보고시 정보가 달라지므로 적용버튼을 클릭하여 반영
    - 임시저장 버튼 클릭해도 상품기본정보 update 서비스에서 상품정보고시도 update됨
    - 필수여부 변경사항 있을 시 update  Y <-> N, 신규는 내용입력 때문에 insert 안 함
3. 법적허가관리분류는 '해당없음'이 아닐 경우 아래 광고심의필증목록 파일은 필수값
    - 적용버튼 누를 때 광고심의필증목록도 같이 저장됨
### 3) 기본정보 탭 - 광고심의필증목록
1. 파일다운로드 요구사항 추가 가능
    - selectionChange가 있기 때문에 파일 한 개 내려받기 혹은 zip파일로 내려받기 예상
2. 체크한 값이 있어야 삭제 버튼 클릭 가능
### 4) 기본정보 탭 - 라이센스파일목록
1. Link : [쿠팡 디즈니 우산][coupangdisneyumbrellalink]
2. 파일다운로드 요구사항 추가 가능
    - selectionChange가 있기 때문에 파일 한 개 내려받기 혹은 zip파일로 내려받기 예상
3. 라이센스파일이 아닌 다른 상품관련 파일 등록을 위한 그리드도 될 수 있음 유의
4. 체크한 값이 있어야 삭제 버튼 클릭 가능

### 5) 기본정보 탭 - 상품이미지 정보
1. 대표이미지
    - 무조건 1개
    - 대표이미지여부 Y
2. 목록이미지
    - 최소 1개, 최대 10개
    - 대표이미지여부 N
    - 목록이미지의 경우 정렬순번 유의(이미지 넣는 순서임)
    - 이미지 넣는 순서임
3. 승인완료 이후 단계에서는 삭제와 동시에 이미지 삽입까지 요구하게 개발되어있음
    - 저장할 때는 무조건 이미지 있도록

### 6) 기본정보 탭 - 단품설정
1. 옵션속성은 코드로 관리 (색상/사이즈/스타일/없음)
2. 속성1, 2, 3 순차적으로 선택한 값을 필터링하여 보여줌
    - 예) 속성1 에서 '색상' 선택 시 속성2는 '사이즈', '스타일', '없음' 중에서 선택 가능
1. 상품구분코드, 상품형태코드가 사은품일 경우 옵션속성1, 2, 3 모두 '없음'으로 자동 세팅
    - 사은품도 단품 1개는 무조건 필요 (이벤트 경품 등록할 때 단품조회 팝업 사용함)
2. 상품구분코드가 세트나 초이스일 경우 옵션속성1, 2, 3 모두 '없음'으로 자동 세팅
    - 현재 일반과 사은품만 사용하므로 개발되어 있지 않음
3. 단품이 이미 생성되어 있는 경우 변경 불가능
    - 단품이 모두 삭제되어있는 경우에만 가능한데 단품 삭제는 승인요청 이전 단계에서만 가능
    - 승인과정 중에는 단품이 무조건 1개 이상 존재해야 승인이 가능하므로 승인완료 이후에는 결국 변경 불가능
4. 속성1 '없음'일 시 속성2, 3 '없음'
5. 속성2 '없음'일 시 속성3 '없음'

### 7) 기본정보 탭 - 단품목록
1. 상품기본정보 폼에서 상품명, 단품설정 폼에서 옵션속성1, 2, 3에 모두 값이 제대로 들어가야 추가 버튼 클릭 가능
1. 추가 버튼 클릭 후 단품조합팝업에서 추가된 단품을 목록에 보여줌 (아직 db에는 저장되지 않은 상태)
2. 단품목록에서 대표단품여부가 Y인 데이터가 무조건 1개 있어야 함
3. 단품판매상태코드
    - 승인요청 단계 이전에서는 단품의 판매상태를 바꿀 수 없음. 판매대기 상태에서 disabled임
    - 승인완료 이후 판매중부터 판매중지까지 변경 가능
    - 승인완료 이후 상품판매상태와 같은 방식으로 동작~~할 수 있으나 승인완료 이후에는 단품 추가 및 삭제가 불가능해서 판매중지 시 판매상태 dropdownlist disabled 로직은 주석처리 해놨음~~
4. 승인완료 이후 단품 추가/삭제 불가능
5. 체크한 값이 있어야 삭제 버튼 클릭 가능
6. 재고수량은 상품일괄수정에서도 변경 가능
7. 단품 생성할 때는 상품명, 속성값이 들어가기 때문에 단품이 생성된 뒤에는 단품 생성에 관여하는 항목들이 변경되면 안됨
    1. 단품 1개 이상 생성 시(그리드에 추가될 시) 상품기본정보의 상품명, 상품구분코드, 상품형태코드 disabled
        1. 상품구분코드가 사은품일 때는 옵션속성1, 2, 3 모두 '없음'으로 자동 세팅되므로 disabled 시킴
        2. 단품을 모두 삭제해야 상품구분코드, 상품형태코드 변경 가능
            - 극단적일 수도 있지만 사은품의 경우 단품가격을 갖고 있지 않고 있기 때문에 단품에서 사용여부 N처리 하는 게 제일 깔끔
            - 그리고 상품 및 단품의 특성을 변경하는 것이므로 사용여부 N처리 하는 게 제일 적합하다고 생각됨
    2. 단품 1개 이상 생성 시(그리드에 추가될 시) 단품설정의 옵션속성 모두 disabled
8. 단품설정의 옵션속성1, 2, 3 이 모두 없음일 경우 단품은 1개만 생성 가능 (1개 생성 후 추가 버튼 비활성화)

### 8) 기본정보 탭 - 가격설정
1. 과세구분
    - 과세코드, TAXT_CD 로 관리
    1. 과세
    2. 면세
    3. *영세
2. 부가세
    - 부가세율코드, VAT_RT_CD로 관리
3. 특소세
    - 특소세율코드, STAX_RT_CD로 관리
4. 부가가치세   
    - 부가가치세란 상품(재화)의 거래나 서비스(용역)의 제공과정에서 얻어지는 부가가치(이윤)에 대하여 과세하는 세금
        > 부가가치세 = 매출세액 - 매입세액
    1. 부가가치세는 물건값에 포함되어 있기 때문에 실제로는 최종소비자가 부담하고, 사업자는 상품을 판매하거나 서비스를 제공할 때 최종소비자가 부담한 부가가치세를 거래금액에 일정금액의 부가가치세를 징수하여 세무서에 납부
    2. 사업상 상품(재화)의 판매나 서비스(용역)를 제공하는 모든 사업자는 부가가치세를 신고, 납부할 의무가 있으나 예외가 존재
        - 면세
        > 미가공식료품 등 생필품 판매, 의료 · 교육 관련 용역 제공 등 법령에 열거된 규정에 따라 부가가치세가 면제되는 사업만을 영위하는 경우에는 부가가치세 신고·납부 의무가 없습니다.     
        >
        > 출처: [국세청][vatreferencefromhometax]

    3. 부가가치세를 징수하는 의무가 있지만 0%의 부가가치세를 적용할 수도 있음
        - 영세
        >  제21조(재화의 수출)   
        >
        > ① 재화의 공급이 수출에 해당하면 그 재화의 공급에 대하여는 30조에도 불구하고 영(零) 퍼센트의 세율(이하 “영세율”이라 한다)을 적용한다.    
        >
        > 출처: [부가가치세법 제21조][vatrule21st]
    4. 과세와 영세는 세금계산서를 발행하지만 면세는 계산서를 발행함
5. 특소세
    - 특별소비세 또는 개별소비세
    - 특별소비세는 부가가치세의 단일 세율에 따른 세 부담을 보완하고 사치성 물품 또는 업종에 대한 소비를 억제시키기 위해 마련됨
        > 2. 다음 각 목의 물품에 대해서는 그 물품가격 중 대통령령으로 정하는 기준가격(이하 “기준가격”이라 한다)을 초과하는 부분의 가격(이하 이 호에서 “과세가격”이라 한다)에 해당 세율을 적용한다.
        >
        >       가. 다음의 물품에 대해서는 과세가격의 100분의 20
        >
        >           1) 보석[공업용 다이아몬드, 가공하지 아니한 원석(原石) 및 나석(裸石)은 제외한다], 진주, 별갑(鼈甲), 산호, 호박(琥珀) 및 상아와 이를 사용한 제품(나석을 사용한 제품은 포함한다)
        >           2) 귀금속 제품
        >           4) 고급 시계
        >           5) 고급 융단
        >           6) 고급 가방
        >
        >       나. 다음의 물품에 대해서는 과세가격의 100분의 20
        >
        >           1) 고급 모피와 그 제품[토끼 모피 및 그 제품과 생모피(生毛皮)는 제외한다]
        >           2) 고급 가구
        >
        > 출처: [개별소비세법][staxrule]
    - 다른 사이트 예시 (주로 직구의 경우 확인 가능)
        - [니코니코][niconicomall]
        - [2fasts][2fastsmall]
4. 적용버튼
    - 상품에서 가격설정이 변경되면 단품가격도 변경되어야 함
    - 승인요청 단계 이후로는 폼이 disabled 처리가 되므로 적용버튼은 상품승인상태가 '등록', '승인반려'일 때만 클릭 가능
    - 상품승인상태가 '등록', '승인반려'일 때 단품가격변경 데이터는 등록 혹은 삭제 처리만 가능하므로 '등록' 상태인 데이터밖에 없음 (승인요청을 할 수 없기 때문에 '승인반려'인 데이터도 없음)
    - 적용버튼을 클릭하면 변경된 상품의 가격설정 정보가 상품 테이블에도 반영되고 이 상품에서 '등록' 상태인 모든 단품가격변경 데이터에도 반영됨
    - 부가가치세: 과세표준가격 * 부가세율
    - 특별소비세: 과세표준가격 * 특소세율

### 9) 기본정보 탭 - 상품주문정보
1. 구매횟수제한여부
    - 마스크 대란 이후 생김
2. 일간최대구매횟수
    - 구매횟수제한여부 Y일 시 0 이상
3. 최소주문수량 <= 최대주문수량

### 10) 기본정보 탭 - 상품물류정보
1. 상품 물류에 대한 정보
2. 상품출고중지여부 Y일시 상품출고중지사유 필수
3. 환불구분: 선환불/후환불
    - 먼저 환불을 하고 회수할 건지 / 회수한 뒤 환불할 건지
    - 주문과 함께 논의해야 할 사항이라 추후에 고정값으로 설정한 뒤 화면에서 숨길 수 있음
4. 정산주기
    1. 30/25
        - 한달치를 다음달 25일에 정산
    2. 10/10
        - 10일치를 10일 뒤에 정산
    3. 배치에는 크게 영향이 없고 정산 조회 때 주기 별로 조회할 수 있도록 역할을 함

### 11) 기본정보 탭 - 배송템플릿정보
1. 협력사와 동일

### 12) 뱃지목록
1. MALL 상품목록 혹은 상품상세에서 보일 뱃지와 아이콘 지정
2. 적용종료일시 > 적용시작일시

<!-- 3. 상품분류 정보고시 추가 설명 있음 -->


* * *

## 별첨
### 별첨1-상품승인순서도
![image](../source/imgs/algorithm-aprv.bmp)

<!-- 첨부링크 -->
[coupangdisneyumbrellalink]: https://www.coupang.com/vp/products/293199220?itemId=925898542&vendorItemId=5301388562&pickType=COU_PICK&q=%EB%94%94%EC%A6%88%EB%8B%88&itemsCount=36&searchId=78acefc2fcf444e2a7ce6c52b0f909ff&rank=1&isAddedCart=

[vatreferencefromhometax]: https://www.nts.go.kr/nts/cm/cntnts/cntntsView.do?mi=2272&cntntsId=7693
[vatrule21st]: https://www.law.go.kr/법령/부가가치세법/(20220701,18577,20211208)/제21조
[staxrule]: https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EA%B0%9C%EB%B3%84%EC%86%8C%EB%B9%84%EC%84%B8%EB%B2%95/(20190401,16091,20181231)/%EC%A0%9C1%EC%A1%B0
[niconicomall]: http://www.niconicomall.com/bbs/content.php?co_id=customs
[2fastsmall]: https://www.2fasts.com/page/info_tax.asp