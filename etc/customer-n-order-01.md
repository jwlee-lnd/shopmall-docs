고객 TABLE 설명

## 휴면 고객
- 휴면 고객 테이블이 따로 없어서 고객M에서 관리
- 테이블 추가 설계시 따로 관리 가능

## 고객
- 고객M에 회원, 비회원, 휴면 다 포함
- 비회원 주문은 주문 당 row insert
    - 비회원 여부, 비회원주문ID
    - 비회원 주문 할 때마다 본인 인증함
    - 고객명, 연락처로만 검색하면 여러 row 나올 수 있음, 정말 일회성임
- 최종 로그인 일시는 로그인 할 때마다 값이 업데이트
- 배치는 아직 생성 안됨
    - 최종 로그인일자 기준으로 예고일자, 휴면 여부, 휴면 일자 update
- 휴면 배치 따로, 폐기 배치 따로
- 비밀번호 변경 시 비밀번호 만기일자 update
    - 만기일자는 로그인할 때도 확인
- 휴면 해제는 사용여부 N을 다 Y로 변경하는 것
    - 본인인증일자, 본인인증방법, 본인인증정보 update 필요

* 제휴사는 들어가는 프로젝트에 따라 달라짐
* 순서도에는 모듈이랑 화면만 고려했고 배치는 아직 없음

## 주문
- 제휴사ID SBDC 때는 TMON ID 들어갔고 현재는 제휴사 테이블도 없기 때문에 뭐가 들어갈지 모름 -> Q

### 주문상품
- 상품단위
- 주문순번 달라짐 (후보키 역할)
- 가격관련 컬럼 상품/단품 가격 그대로 들어가는 컬럼
- 프로모션과 쿠폰 등 할인이 적용된 가격 -> 주문 가격 컬럼
- 주문상태코드에 따라 배송도 update
- 취/교/반은 주문상품에서 정보를 읽어야 함

### 배송비
- 주문 단위 + 합배송 단위 (배송비그룹ID로 봐도 됨)
- 회계 처리 때문에 협력사ID 필요
- 배송비를 소비자로부터 받지만 결국 협력사에 지불해야할 돈이기에
- 현재 상품에서는 최대포장단위를 받지 않고 있음
- 배송비 계산 과정
    1. 배송비 부과 상품 확인
    2. 배송비 부과 여부 Y일 시 상품 간 동일 협력사인지 확인
    3. 동일 협력사일 시 합포장가능여부 확인
    4. 배송비 계산
- 같은 배송비 그룹은 배송비 한 row
    - 반품 때 반품배송비에 대한 배송비환불금액

### 결제
- 결제는 상품 가격과 배송비가 포함되어 있다

### 반품상품
- 직전교환ID: 교환한 Item을 또 교환할 수 있어서 직전에 교환했던 교환ID
- 교환이미지는 고객이 입력하며 최대 3개까지
- 교환 시
    - 교환 주문 배송비ID
    - 교환 반품 배송비ID
    - 결제ID
    - 한 상품 씩 교환 (교환할 단품을 고름)
    - 한 상품에 대해서 수량만 바뀜
- 회수완료 때 환불
- 반품접수 -> 회수지시 -> 반품승인(회수완료이자 환불)

### 취소상품
- 취소는 결제완료까지만 가능
    - 교환/반품은 배송준비 중일 때부터 반품가능기간/교환가능기간 MAX
    - ~취소 상태코드는 '~90'
    - 전체 취소일 때만 상태코드 ~취소로 udpate
        - 유효수량이 있다면 유효수량의 상태에 따름

### 환불
- 환불수단은 결제수단과 같게 들어감
- ~접수 시 ~예정일시/~예정금액 update
- ~완료 시 환불일시/환불금액 update